#!/bin/bash

# Проверка наличия аргумента (имени файла)
if [ "$#" -eq 0 ]; then
    echo "Использование: $0 <имя_файла>"
    exit 1
fi

filename="$1"

# Проверка существования файла
if [ ! -f "$filename" ]; then
    echo "Файл \"$filename\" не существует."
    exit 1
fi

# Создание временного файла для сохранения отфильтрованных строк
temp_file=$(mktemp)

# Фильтрация строк
grep -vE '^\s*([#;]|$)' "$filename" > "$temp_file"

# Перемещение временного файла в оригинальный
mv "$temp_file" "$filename"

echo "Файл \"$filename\" обновлен, удалены строки, начинающиеся с символов # или ; и пустые строки."
